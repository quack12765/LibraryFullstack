{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\mixin.js","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\mixin.js","mtime":1658388407925},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY291bnQ6ICIiLAogICAgICBicmFuY2hzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIG1vbWVudAogICAgUGFyc2VEYXRlOiBmdW5jdGlvbiBQYXJzZURhdGUoc3RyKSB7CiAgICAgIHZhciBkYXRlID0gbW9tZW50KHN0cik7CiAgICAgIHJldHVybiBkYXRlLmZvcm1hdCgieXl5eS1NTS1ERCIpOwogICAgfSwKICAgIEdldFJlbWFpbkRheXM6IGZ1bmN0aW9uIEdldFJlbWFpbkRheXMoc3RyLCBkZWFkbGluZSkgewogICAgICB2YXIgZGF0ZSA9IG1vbWVudChzdHIpOwogICAgICByZXR1cm4gTWF0aC5mbG9vcihkZWFkbGluZSArIG1vbWVudC5kdXJhdGlvbihkYXRlLmRpZmYobW9tZW50KCkpKS5hc0RheXMoKSk7CiAgICB9LAogICAgUGx1c0RhdGVCeURheXNBbmRQYXJzZTogZnVuY3Rpb24gUGx1c0RhdGVCeURheXNBbmRQYXJzZShkYXRlLCBkYXlzKSB7CiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuYWRkKGRheXMsICJkIikuZm9ybWF0KCJ5eXl5LU1NLUREIik7CiAgICB9LAogICAgLy8gQm9vayAmIENvcHkKICAgIEhhbmRsZUJvcnJvdzogZnVuY3Rpb24gSGFuZGxlQm9ycm93KGFjYykgewogICAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvc2VhcmNoQm9vay9ib3Jyb3dDb3B5JywgewogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGFjY2Vzc2lvbl9udW1iZXI6IGFjYywKICAgICAgICAgIGFjY291bnQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIkFDQ09VTlQiKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgYWxlcnQoIuWAn+mWseaIkOWKnyEiKTsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBhbGVydCgi5YCf6Zax5aSx5pWXIik7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfSwKICAgIEhhbmRsZVJlc2VydmU6IGZ1bmN0aW9uIEhhbmRsZVJlc2VydmUoY29weWluZm8pIHsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlYXJjaEJvb2svcmVzZXJ2ZUNvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogY29weWluZm8uYWNjZXNzaW9uX251bWJlciwKICAgICAgICAgIGJyYW5jaDogY29weWluZm8ubG9jYXRpb24sCiAgICAgICAgICBhY2NvdW50OiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJBQ0NPVU5UIikKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGFsZXJ0KCLpoJDntITmiJDlip8hIik7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgYWxlcnQoIumgkOe0hOWkseaVlyIpOwogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBIYW5kbGVDYW5jZWxSZXNlcnZlOiBmdW5jdGlvbiBIYW5kbGVDYW5jZWxSZXNlcnZlKGFjYykgewogICAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvc2VhcmNoQm9vay9jYW5jZWxSZXNlcnZlQ29weScsIHsKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBhY2Nlc3Npb25fbnVtYmVyOiBhY2MsCiAgICAgICAgICBhY2NvdW50OiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJBQ0NPVU5UIikKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGFsZXJ0KCLlj5bmtojmiJDlip8hIik7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgYWxlcnQoIuWPlua2iOWkseaVlyIpOwogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyAhISEgTk9USUNFICEhISAgCiAgICBnZXRDb3B5UmVzZXJ2YXRpb25CeUFjY2Vzc2lvbjogZnVuY3Rpb24gZ2V0Q29weVJlc2VydmF0aW9uQnlBY2Nlc3Npb24oYWNjKSB7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2dldENvcHlSZXNlcnZhdGlvbkJ5QWNjZXNzaW9uJywgewogICAgICAgIGRhdGE6IGFjYwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5sZW5ndGgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuYWNjb3VudCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIkFDQ09VTlQiKTsgLy8gR2V0IGFsbCBicmFuY2hzIGluZm8KCiAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvbG9jYXRpb24vZ2V0QnJhbmNoTGlzdCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy5icmFuY2hzID0gcmVzLmRhdGE7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["D:/library_PROJ/LibraryFullstack/source/front-end/src/mixin.js"],"names":["moment","data","account","branchs","methods","ParseDate","str","date","format","GetRemainDays","deadline","Math","floor","duration","diff","asDays","PlusDateByDaysAndParse","days","add","HandleBorrow","acc","$http","post","accession_number","sessionStorage","getItem","then","res","alert","location","reload","catch","e","console","log","HandleReserve","copyinfo","branch","HandleCancelReserve","getCopyReservationByAccession","length","mounted"],"mappings":"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","sourcesContent":["import moment from 'moment';\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            account: \"\",\r\n            branchs: [],\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        // moment\r\n\r\n        ParseDate(str){\r\n            let date = moment(str)\r\n            return date.format(\"yyyy-MM-DD\")\r\n        },\r\n\r\n        GetRemainDays(str, deadline){\r\n            let date = moment(str)\r\n            return Math.floor(deadline + moment.duration(date.diff(moment())).asDays())\r\n        },\r\n\r\n        PlusDateByDaysAndParse(date, days){\r\n            return moment(date).add(days, \"d\").format(\"yyyy-MM-DD\")\r\n        },\r\n\r\n\r\n\r\n        // Book & Copy\r\n\r\n        HandleBorrow(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/borrowCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"借閱成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"借閱失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n\r\n        HandleReserve(copyinfo) {\r\n            this.$http\r\n                .post('/api/searchBook/reserveCopy', { \r\n                    data: {\r\n                        accession_number: copyinfo.accession_number,\r\n                        branch: copyinfo.location,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"預約成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"預約失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n        HandleCancelReserve(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/cancelReserveCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"取消成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"取消失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n\r\n        // !!! NOTICE !!!  \r\n        getCopyReservationByAccession(acc){\r\n            this.$http\r\n                .post('/api/searchBook/getCopyReservationByAccession', { data: acc })\r\n                .then(res => {\r\n                    console.log(res.data.length)\r\n                })\r\n                .catch(e => { console.log(e) })\r\n        },\r\n    },\r\n\r\n    mounted() {\r\n        this.account = sessionStorage.getItem(\"ACCOUNT\") \r\n\r\n        // Get all branchs info\r\n        this.$http\r\n            .post('/api/location/getBranchList')\r\n            .then(res => {\r\n                this.branchs = res.data\r\n            })\r\n            .catch(e => { console.log(e) })\r\n    }\r\n}"]}]}