{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\views\\pages\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\views\\pages\\Login.vue","mtime":1658200285687},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2NvdW50OiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBwcm90ZWN0aW9uOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCAnJyk7CiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgJycpOwogICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnTkFNRScsICcnKTsKICAgIHRoaXMuYWNjb3VudCA9ICcnOwogICAgdGhpcy5wYXNzd29yZCA9ICcnOwogICAgdGhpcy5wcm90ZWN0aW9uID0gdHJ1ZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnByb3RlY3Rpb24pIHsKICAgICAgICBpZiAoIXRoaXMuYWNjb3VudCB8fCAhdGhpcy5wYXNzd29yZCkgcmV0dXJuIGFsZXJ0KCfoq4vnorrlr6bovLjlhaXluLPomZ/lr4bnorwhISEnKTsKICAgICAgICB0aGlzLnByb3RlY3Rpb24gPSBmYWxzZTsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIGFjY291bnQ6IHRoaXMuYWNjb3VudCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvYWNjb3VudHMvbG9naW4nLCB7CiAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZGF0YVswXTsKCiAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdBQ0NPVU5UJywgX3RoaXMuYWNjb3VudCk7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnUk9MRScsIHJlc3VsdC5yb2xlKTsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdOQU1FJywgcmVzdWx0Lm5hbWUpOwogICAgICAgICAgICAgIHZhciByb2xlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnUk9MRScpOwoKICAgICAgICAgICAgICBpZiAocm9sZSA9PT0gJ2FkbWluJyB8fCByb2xlID09PSAndXNlcicgfHwgcm9sZSA9PT0gJ2d1ZXN0JykgewogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvbWFpbi9tYWluJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCfluLPomZ/mrIrpmZDmnInllY/poYzvvIzoq4voga/nuavns7vntbHnrqHnkIblk6EhISEnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnQUNDT1VOVCcsICcnKTsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgJycpOwogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ05BTUUnLCAnJyk7CiAgICAgICAgICAgICAgX3RoaXMucGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgICBhbGVydCgn5a+G56K85LiN5q2j56K6ISEhJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCfnmbznlJ/pnZ7poJDmnJ/ni4Dms4HvvIzoq4vnorroqo3lvozlho3pgLLooYzmk43kvZwhJyk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMucHJvdGVjdGlvbiA9IHRydWU7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzaG93QWxlcnQ6IGZ1bmN0aW9uIHNob3dBbGVydCgpIHsKICAgICAgYWxlcnQoJ+iri+iBr+e5q+ezu+e1seeuoeeQhuWToSEhIScpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA,IAAA,cAAA,CAAA,OAAA,CAAA,SAAA,EAAA,EAAA;AACA,IAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,IAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AAEA,SAAA,OAAA,GAAA,EAAA;AACA,SAAA,QAAA,GAAA,EAAA;AACA,SAAA,UAAA,GAAA,IAAA;AACA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,CAAA,KAAA,OAAA,IAAA,CAAA,KAAA,QAAA,EAAA,OAAA,KAAA,CAAA,cAAA,CAAA;AAEA,aAAA,UAAA,GAAA,KAAA;AAEA,YAAA,IAAA,GAAA;AACA,UAAA,OAAA,EAAA,KAAA,OADA;AAEA,UAAA,QAAA,EAAA,KAAA;AAFA,SAAA;AAKA,aAAA,KAAA,CACA,IADA,CACA,qBADA,EACA;AAAA,UAAA,IAAA,EAAA;AAAA,SADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,gBAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;;AACA,gBAAA,MAAA,EAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,SAAA,EAAA,KAAA,CAAA,OAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AAEA,kBAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA;;AAEA,kBAAA,IAAA,KAAA,OAAA,IAAA,IAAA,KAAA,MAAA,IAAA,IAAA,KAAA,OAAA,EAAA;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,YAAA;AACA,eAFA,MAEA;AACA,gBAAA,KAAA,CAAA,qBAAA,CAAA;AACA;AACA,aAZA,MAYA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,SAAA,EAAA,EAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,GAAA,EAAA;AACA,cAAA,KAAA,CAAA,UAAA,CAAA;AACA;AACA,WArBA,MAqBA;AACA,YAAA,KAAA,CAAA,oBAAA,CAAA;AACA;;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AACA,SA5BA,EA6BA,KA7BA,CA6BA,UAAA,GAAA,EAAA;AAAA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AAAA,SA7BA;AA8BA;AACA,KA3CA;AA4CA,IAAA,SA5CA,uBA4CA;AACA,MAAA,KAAA,CAAA,aAAA,CAAA;AACA;AA9CA;AAjBA,CAAA","sourcesContent":["<template>\r\n    <CContainer class=\"d-flex align-items-center min-vh-100\">\r\n        <CRow class=\"justify-content-center\">\r\n            <CCol lg = '12'>\r\n                <CCardGroup>\r\n                    <CCard\r\n                        color=\"info\"\r\n                        text-color=\"white\"\r\n                        class=\"text-center py-2\"\r\n                        style=\"width:100%\"\r\n                    >\r\n                        <CCardBody>\r\n                            <h2 class=\"pt-4\">Library</h2>\r\n                            <CRow class=\"pt-4\">\r\n                                <CCol>\r\n                                    <CImg src=\"img/brand/library.jpg\" fluid class=\"mb-2\" />\r\n                                </CCol>\r\n                            </CRow>\r\n                        </CCardBody>\r\n                    </CCard>\r\n\r\n                    <CCard class=\"p-5\">\r\n                        <CCardBody>\r\n                            <CForm>\r\n                                <h1>登入</h1>\r\n                                <p class=\"text-muted\">請輸入帳號密碼</p>\r\n                                <CInput type=\"text\" placeholder=\"帳號\" v-model=\"account\" list=\"account_list\">\r\n                                    <template #prepend-content><CIcon name=\"cil-user\"/></template>\r\n                                </CInput>\r\n                                <CInput placeholder=\"密碼\" type=\"password\" v-model=\"password\" @keyup.enter.native=\"login\">\r\n                                    <template #prepend-content><CIcon name=\"cil-lock-locked\"/></template>\r\n                                </CInput>\r\n                                <CRow>\r\n                                    <CCol col=\"6\">\r\n                                        <CButton color=\"link\" class=\"px-0\" @click=\"showAlert\">忘記密碼?</CButton>\r\n                                    </CCol>\r\n                                    <CCol col=\"6\" class=\"text-right\">\r\n                                        <CButton color=\"info\" class=\"px-4\" @click=\"login\">登入</CButton>\r\n                                    </CCol>\r\n                                </CRow>\r\n                            </CForm>\r\n                        </CCardBody>\r\n                    </CCard>\r\n                </CCardGroup>\r\n            </CCol>\r\n        </CRow>\r\n    </CContainer>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data()  {\r\n        return {\r\n            account: '',\r\n            password: '',\r\n            protection:true\r\n        }\r\n    },\r\n    created(){\r\n        sessionStorage.setItem('ACCOUNT', '');\r\n        sessionStorage.setItem('ROLE', '')\r\n        sessionStorage.setItem('NAME', '')\r\n\r\n        this.account    = ''\r\n        this.password   = ''\r\n        this.protection    = true\r\n    },\r\n    methods:{\r\n        login(){\r\n            if (this.protection){\r\n                if(!(this.account) || !(this.password)) return alert('請確實輸入帳號密碼!!!');\r\n\r\n                this.protection = false\r\n\r\n                let data = {\r\n                    account:this.account,\r\n                    password:this.password\r\n                }\r\n              \r\n                this.$http\r\n                    .post('/api/accounts/login',{data:data})\r\n                    .then(res => {\r\n                        if (res.status === 200){\r\n                            var result = res.data[0]\r\n                            if (result){\r\n                                sessionStorage.setItem('ACCOUNT', this.account)\r\n                                sessionStorage.setItem('ROLE', result.role)\r\n                                sessionStorage.setItem('NAME', result.name)\r\n\r\n                                let role = sessionStorage.getItem('ROLE')\r\n\r\n                                if(role === 'admin' || role === 'user' || role === 'guest') {\r\n                                    this.$router.push('/main/main')\r\n                                } else {\r\n                                    alert('帳號權限有問題，請聯繫系統管理員!!!')\r\n                                }\r\n                            } else {\r\n                                sessionStorage.setItem('ACCOUNT', '')\r\n                                sessionStorage.setItem('ROLE', '')\r\n                                sessionStorage.setItem('NAME', '')\r\n                                this.password = ''\r\n                                alert('密碼不正確!!!')\r\n                            }\r\n                        } else {\r\n                            alert('發生非預期狀況，請確認後再進行操作!')\r\n                        }\r\n                        this.protection = true\r\n                    })\r\n                    .catch(err => { console.log(err.response.data.message) })\r\n            }\r\n        },\r\n        showAlert(){\r\n            alert('請聯繫系統管理員!!!')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"sourceRoot":"src/views/pages"}]}