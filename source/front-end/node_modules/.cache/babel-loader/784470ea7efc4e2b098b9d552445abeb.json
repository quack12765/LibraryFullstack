{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\mixin.js","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\mixin.js","mtime":1658215209540},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY291bnQ6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8gbW9tZW50CiAgICBQYXJzZURhdGU6IGZ1bmN0aW9uIFBhcnNlRGF0ZShzdHIpIHsKICAgICAgdmFyIGRhdGUgPSBtb21lbnQoc3RyKTsKICAgICAgcmV0dXJuIGRhdGUuZm9ybWF0KCJ5eXl5LU1NLUREIik7CiAgICB9LAogICAgR2V0UmVtYWluRGF5czogZnVuY3Rpb24gR2V0UmVtYWluRGF5cyhzdHIsIGRlYWRsaW5lKSB7CiAgICAgIHZhciBkYXRlID0gbW9tZW50KHN0cik7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKGRlYWRsaW5lICsgbW9tZW50LmR1cmF0aW9uKGRhdGUuZGlmZihtb21lbnQoKSkpLmFzRGF5cygpKTsKICAgIH0sCiAgICAvLyBCb29rICYgQ29weQogICAgSGFuZGxlQm9ycm93OiBmdW5jdGlvbiBIYW5kbGVCb3Jyb3coYWNjKSB7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2JvcnJvd0NvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi5YCf6Zax5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLlgJ/plrHlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgSGFuZGxlUmVzZXJ2ZTogZnVuY3Rpb24gSGFuZGxlUmVzZXJ2ZShhY2MpIHsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlYXJjaEJvb2svcmVzZXJ2ZUNvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi6aCQ57SE5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLpoJDntITlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgSGFuZGxlQ2FuY2VsUmVzZXJ2ZTogZnVuY3Rpb24gSGFuZGxlQ2FuY2VsUmVzZXJ2ZShhY2MpIHsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlYXJjaEJvb2svY2FuY2VsUmVzZXJ2ZUNvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi5Y+W5raI5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLlj5bmtojlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gISEhIE5PVElDRSAhISEgIAogICAgZ2V0Q29weVJlc2VydmF0aW9uQnlBY2Nlc3Npb246IGZ1bmN0aW9uIGdldENvcHlSZXNlcnZhdGlvbkJ5QWNjZXNzaW9uKGFjYykgewogICAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvc2VhcmNoQm9vay9nZXRDb3B5UmVzZXJ2YXRpb25CeUFjY2Vzc2lvbicsIHsKICAgICAgICBkYXRhOiBhY2MKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubGVuZ3RoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5hY2NvdW50ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpOwogIH0KfTs="},{"version":3,"sources":["D:/library_PROJ/LibraryFullstack/source/front-end/src/mixin.js"],"names":["moment","data","account","methods","ParseDate","str","date","format","GetRemainDays","deadline","Math","floor","duration","diff","asDays","HandleBorrow","acc","$http","post","accession_number","sessionStorage","getItem","then","res","alert","location","reload","catch","e","console","log","HandleReserve","HandleCancelReserve","getCopyReservationByAccession","length","mounted"],"mappings":"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","sourcesContent":["import moment from 'moment';\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            account: \"\"\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        // moment\r\n\r\n        ParseDate(str){\r\n            let date = moment(str)\r\n            return date.format(\"yyyy-MM-DD\")\r\n        },\r\n\r\n        GetRemainDays(str, deadline){\r\n            let date = moment(str)\r\n            return Math.floor(deadline + moment.duration(date.diff(moment())).asDays())\r\n        },\r\n\r\n\r\n\r\n        // Book & Copy\r\n\r\n        HandleBorrow(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/borrowCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"借閱成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"借閱失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n\r\n        HandleReserve(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/reserveCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"預約成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"預約失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n        HandleCancelReserve(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/cancelReserveCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"取消成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"取消失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n\r\n        // !!! NOTICE !!!  \r\n        getCopyReservationByAccession(acc){\r\n            this.$http\r\n                .post('/api/searchBook/getCopyReservationByAccession', { data: acc })\r\n                .then(res => {\r\n                    console.log(res.data.length)\r\n                })\r\n                .catch(e => { console.log(e) })\r\n        },\r\n    },\r\n\r\n    mounted() {\r\n        this.account = sessionStorage.getItem(\"ACCOUNT\") \r\n    }\r\n}"]}]}