{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\mixin.js","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\mixin.js","mtime":1658481235533},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY291bnQ6ICIiLAogICAgICBicmFuY2hzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIG1vbWVudAogICAgUGFyc2VEYXRlOiBmdW5jdGlvbiBQYXJzZURhdGUoc3RyKSB7CiAgICAgIHZhciBkYXRlID0gbW9tZW50KHN0cik7CiAgICAgIHJldHVybiBkYXRlLmZvcm1hdCgieXl5eS1NTS1ERCIpOwogICAgfSwKICAgIEdldFJlbWFpbkRheXM6IGZ1bmN0aW9uIEdldFJlbWFpbkRheXMoc3RyLCBkZWFkbGluZSkgewogICAgICB2YXIgZGF0ZSA9IG1vbWVudChzdHIpOwogICAgICByZXR1cm4gTWF0aC5mbG9vcihkZWFkbGluZSArIG1vbWVudC5kdXJhdGlvbihkYXRlLmRpZmYobW9tZW50KCkpKS5hc0RheXMoKSk7CiAgICB9LAogICAgUGx1c0RhdGVCeURheXNBbmRQYXJzZTogZnVuY3Rpb24gUGx1c0RhdGVCeURheXNBbmRQYXJzZShkYXRlLCBkYXlzKSB7CiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuYWRkKGRheXMsICJkIikuZm9ybWF0KCJ5eXl5LU1NLUREIik7CiAgICB9LAogICAgLy8gQm9vayAmIENvcHkKICAgIE1hcENvZGVUb1N0YXRlOiBmdW5jdGlvbiBNYXBDb2RlVG9TdGF0ZShzKSB7CiAgICAgIGlmIChzID09PSAwKSB7CiAgICAgICAgcmV0dXJuICfmnrbkuIonOwogICAgICB9IGVsc2UgaWYgKHMgPT09IDEpIHsKICAgICAgICByZXR1cm4gJ+i3qOihjOenu+i9ieS4rSc7CiAgICAgIH0gZWxzZSBpZiAocyA9PT0gMikgewogICAgICAgIHJldHVybiAn5b6F6aCQ57SE6ICF5Y+W5pu4JzsKICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIEhhbmRsZUJvcnJvdzogZnVuY3Rpb24gSGFuZGxlQm9ycm93KGFjYywgbG9jKSB7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2JvcnJvd0NvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogJ3VzZXInLAogICAgICAgICAgbG9jYXRpb246IGxvYwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgYWxlcnQoIuWAn+mWseaIkOWKnyEiKTsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBhbGVydCgi5YCf6Zax5aSx5pWXIik7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfSwKICAgIEhhbmRsZVJlc2VydmU6IGZ1bmN0aW9uIEhhbmRsZVJlc2VydmUoY29weWluZm8pIHsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlYXJjaEJvb2svcmVzZXJ2ZUNvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogY29weWluZm8uYWNjZXNzaW9uX251bWJlciwKICAgICAgICAgIGN1cl9sb2NhdGlvbjogY29weWluZm8uY3VyX2xvY2F0aW9uLAogICAgICAgICAgdG9fbG9jYXRpb246IGNvcHlpbmZvLmxvY2F0aW9uLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi6aCQ57SE5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLpoJDntITlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgSGFuZGxlQ2FuY2VsUmVzZXJ2ZTogZnVuY3Rpb24gSGFuZGxlQ2FuY2VsUmVzZXJ2ZShhY2MpIHsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlYXJjaEJvb2svY2FuY2VsUmVzZXJ2ZUNvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi5Y+W5raI5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLlj5bmtojlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gISEhIE5PVElDRSAhISEgIAogICAgZ2V0Q29weVJlc2VydmF0aW9uQnlBY2Nlc3Npb246IGZ1bmN0aW9uIGdldENvcHlSZXNlcnZhdGlvbkJ5QWNjZXNzaW9uKGFjYykgewogICAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvc2VhcmNoQm9vay9nZXRDb3B5UmVzZXJ2YXRpb25CeUFjY2Vzc2lvbicsIHsKICAgICAgICBkYXRhOiBhY2MKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubGVuZ3RoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmFjY291bnQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJBQ0NPVU5UIik7IC8vIEdldCBhbGwgYnJhbmNocyBpbmZvCgogICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL2xvY2F0aW9uL2dldEJyYW5jaExpc3QnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuYnJhbmNocyA9IHJlcy5kYXRhOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["D:/library_PROJ/LibraryFullstack/source/front-end/src/mixin.js"],"names":["moment","data","account","branchs","methods","ParseDate","str","date","format","GetRemainDays","deadline","Math","floor","duration","diff","asDays","PlusDateByDaysAndParse","days","add","MapCodeToState","s","HandleBorrow","acc","loc","$http","post","accession_number","location","then","res","alert","reload","catch","e","console","log","HandleReserve","copyinfo","cur_location","to_location","sessionStorage","getItem","HandleCancelReserve","getCopyReservationByAccession","length","mounted"],"mappings":"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","sourcesContent":["import moment from 'moment';\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            account: \"\",\r\n            branchs: [],\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        // moment\r\n\r\n        ParseDate(str){\r\n            let date = moment(str)\r\n            return date.format(\"yyyy-MM-DD\")\r\n        },\r\n\r\n        GetRemainDays(str, deadline){\r\n            let date = moment(str)\r\n            return Math.floor(deadline + moment.duration(date.diff(moment())).asDays())\r\n        },\r\n\r\n        PlusDateByDaysAndParse(date, days){\r\n            return moment(date).add(days, \"d\").format(\"yyyy-MM-DD\")\r\n        },\r\n\r\n\r\n\r\n        // Book & Copy\r\n\r\n        MapCodeToState (s) {\r\n            if(s === 0){\r\n                return '架上'\r\n            }else if (s === 1){\r\n                return '跨行移轉中'\r\n            }else if (s === 2){\r\n                return '待預約者取書'\r\n            }\r\n            return ''\r\n        },\r\n\r\n        HandleBorrow(acc, loc) {\r\n            this.$http\r\n                .post('/api/searchBook/borrowCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: 'user',\r\n                        location: loc\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"借閱成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"借閱失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n\r\n        HandleReserve(copyinfo) {\r\n            this.$http\r\n                .post('/api/searchBook/reserveCopy', { \r\n                    data: {\r\n                        accession_number: copyinfo.accession_number,\r\n                        cur_location: copyinfo.cur_location,\r\n                        to_location: copyinfo.location,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"預約成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"預約失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n        HandleCancelReserve(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/cancelReserveCopy', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        account: sessionStorage.getItem(\"ACCOUNT\")\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"取消成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"取消失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n\r\n        // !!! NOTICE !!!  \r\n        getCopyReservationByAccession(acc){\r\n            this.$http\r\n                .post('/api/searchBook/getCopyReservationByAccession', { data: acc })\r\n                .then(res => {\r\n                    console.log(res.data.length)\r\n                })\r\n                .catch(e => { console.log(e) })\r\n        },\r\n    },\r\n\r\n    mounted() {\r\n        this.account = sessionStorage.getItem(\"ACCOUNT\") \r\n\r\n        // Get all branchs info\r\n        this.$http\r\n            .post('/api/location/getBranchList')\r\n            .then(res => {\r\n                this.branchs = res.data\r\n            })\r\n            .catch(e => { console.log(e) })\r\n    }\r\n}"]}]}