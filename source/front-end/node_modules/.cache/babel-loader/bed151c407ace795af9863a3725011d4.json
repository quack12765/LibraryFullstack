{"remainingRequest":"/home/user_2200475/library_PROJ/source/front-end/node_modules/babel-loader/lib/index.js!/home/user_2200475/library_PROJ/source/front-end/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/user_2200475/library_PROJ/source/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/user_2200475/library_PROJ/source/front-end/src/views/BookDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/user_2200475/library_PROJ/source/front-end/src/views/BookDetail.vue","mtime":1658131974969},{"path":"/home/user_2200475/library_PROJ/source/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user_2200475/library_PROJ/source/front-end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/user_2200475/library_PROJ/source/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user_2200475/library_PROJ/source/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWyJyZWxvYWQiXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgQm9vazoge30sCiAgICAgIENvcHlzOiBbXSwKICAgICAgc2VsX25hdjogMAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2dldEJvb2tJbmZvQnlJU0JOJywgewogICAgICBkYXRhOiB0aGlzLiRyb3V0ZS5wYXJhbXMuSVNCTgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzLkJvb2sgPSByZXMuZGF0YVswXTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfSk7CiAgICB0aGlzLiRodHRwLnBvc3QoJy9hcGkvc2VhcmNoQm9vay9nZXRDb3B5SW5mb0J5SVNCTicsIHsKICAgICAgZGF0YTogdGhpcy4kcm91dGUucGFyYW1zLklTQk4KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy5Db3B5cyA9IHJlcy5kYXRhOwogICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgIH0pOwogIH0sCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSwKICBtZXRob2RzOiB7CiAgICBnZXRDb3B5UmVzZXJ2YXRpb25CeUFjY2Vzc2lvbjogZnVuY3Rpb24gZ2V0Q29weVJlc2VydmF0aW9uQnlBY2Nlc3Npb24oYWNjKSB7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2dldENvcHlSZXNlcnZhdGlvbkJ5QWNjZXNzaW9uJywgewogICAgICAgIGRhdGE6IGFjYwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5sZW5ndGgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgICAgcmV0dXJuIDE7CiAgICB9LAogICAgSGFuZGxlQm9ycm93OiBmdW5jdGlvbiBIYW5kbGVCb3Jyb3coYWNjKSB7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2JvcnJvd0NvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi5YCf6Zax5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLlgJ/plrHlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgSGFuZGxlUmVzZXJ2ZTogZnVuY3Rpb24gSGFuZGxlUmVzZXJ2ZShhY2MpIHsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL3NlYXJjaEJvb2svcmVzZXJ2ZUNvcHknLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgYWNjb3VudDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQUNDT1VOVCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydCgi6aCQ57SE5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCLpoJDntITlpLHmlZciKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["BookDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,QAAA,CADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AACA,SAAA,KAAA,CACA,IADA,CACA,mCADA,EACA;AAAA,MAAA,IAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAAA,KADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,KAJA,EAKA,KALA,CAKA,UAAA,CAAA,EAAA;AAAA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,KALA;AAOA,SAAA,KAAA,CACA,IADA,CACA,mCADA,EACA;AAAA,MAAA,IAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAAA,KADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA,KALA,EAMA,KANA,CAMA,UAAA,CAAA,EAAA;AAAA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,KANA;AAQA,GA3BA;AA6BA,EAAA,MA7BA,oBA6BA,CAEA,CA/BA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,6BADA,yCACA,GADA,EACA;AACA,WAAA,KAAA,CACA,IADA,CACA,+CADA,EACA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,CAAA,EAAA;AAAA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,OALA;AAOA,aAAA,CAAA;AACA,KAVA;AAYA,IAAA,YAZA,wBAYA,GAZA,EAYA;AACA,WAAA,KAAA,CACA,IADA,CACA,4BADA,EACA;AACA,QAAA,IAAA,EAAA;AACA,UAAA,gBAAA,EAAA,GADA;AAEA,UAAA,OAAA,EAAA,cAAA,CAAA,OAAA,CAAA,SAAA;AAFA;AADA,OADA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;AACA,QAAA,QAAA,CAAA,MAAA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAdA;AAeA,KA5BA;AA8BA,IAAA,aA9BA,yBA8BA,GA9BA,EA8BA;AACA,WAAA,KAAA,CACA,IADA,CACA,6BADA,EACA;AACA,QAAA,IAAA,EAAA;AACA,UAAA,gBAAA,EAAA,GADA;AAEA,UAAA,OAAA,EAAA,cAAA,CAAA,OAAA,CAAA,SAAA;AAFA;AADA,OADA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;AACA,QAAA,QAAA,CAAA,MAAA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAdA;AAeA;AA9CA;AAjCA,CAAA","sourcesContent":["<template>\n    <div>\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-12\">\n                    <div class=\"card p-4\">\n                        <div class=\"row justify-content-around\">\n                            <div class=\"col-3 mr-5\">\n                                <img :src=\"Book.show_img_url\">\n                            </div>\n                            <div class=\"col-6\">\n                                <div class=\"card-body\">\n                                    <h3>{{Book.name}}</h3>\n                                    <hr>\n                                    <p>作者： {{ Book.author }}</p>\n                                    <p>出版社： {{ Book.publisher }}</p>\n                                    <p>出版年分: {{ Book.publish_year }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"container\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link \" :class=\"{ active: sel_nav == 0 }\" @click=\" sel_nav = 0 \">館藏</a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" :class=\"{ active: sel_nav == 1 }\" @click=\" sel_nav = 1 \">更多資訊</a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" :class=\"{ active: sel_nav == 2 }\" @click=\" sel_nav = 2 \">評價</a>\n                </li>\n            </ul>\n            <table v-if=\"sel_nav == 0\" class=\"table\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">條碼號</th>\n                        <th scope=\"col\">索書號</th>\n                        <th scope=\"col\">館藏狀態</th>\n                        <th scope=\"col\">預約人數</th>\n                        <th scope=\"col\"></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"copy in Copys\" :key=\"copy.accession_number\">\n                        <td>{{ copy.accession_number }}</td>\n                        <td>{{ copy.call_number }}</td>\n                        <td>{{ copy.account === null ? \"可借閱\" : \"借出中 \" }}</td>\n                        <td>{{ copy.account === null ? 0 : getCopyReservationByAccession(copy.accession_number) }}</td>\n                        <td>\n                            <button v-if=\"!copy.account\" @click=\"HandleBorrow(copy.accession_number)\" class=\"btn btn-success\">借閱</button>\n                            <button v-if=\"copy.account\" @click=\"HandleReserve(copy.accession_number)\" class=\"btn btn-primary\">預約</button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <div v-if=\"sel_nav == 1\">\n                <p> {{ Book.intro }} </p>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    inject: [\"reload\"],\n\n    data() {\n        return {\n            Book: {},\n            Copys: [],\n            sel_nav: 0,\n        };\n    },\n\n    mounted() {\n        this.$http\n            .post('/api/searchBook/getBookInfoByISBN', { data: this.$route.params.ISBN })\n            .then(res => {\n                this.Book = res.data[0]\n            })\n            .catch(e => { console.log(e) })\n\n        this.$http\n            .post('/api/searchBook/getCopyInfoByISBN', { data: this.$route.params.ISBN })\n            .then(res => {\n                this.Copys = res.data\n                console.log(res.data)\n            })\n            .catch(e => { console.log(e) })\n\n    },\n\n    update() {\n        \n    },\n\n    methods: {\n        getCopyReservationByAccession(acc){\n            this.$http\n                .post('/api/searchBook/getCopyReservationByAccession', { data: acc })\n                .then(res => {\n                    console.log(res.data.length)\n                })\n                .catch(e => { console.log(e) })\n            \n            return 1\n        },\n\n        HandleBorrow(acc) {\n            this.$http\n                .post('/api/searchBook/borrowCopy', { \n                    data: {\n                        accession_number: acc,\n                        account: sessionStorage.getItem(\"ACCOUNT\")\n                    } \n                })\n                .then(res => {\n                    alert(\"借閱成功!\")\n                    location.reload()\n                })\n                .catch(e => { \n                    alert(\"借閱失敗\")\n                    console.log(e) \n                })\n        },\n\n        HandleReserve(acc) {\n            this.$http\n                .post('/api/searchBook/reserveCopy', { \n                    data: {\n                        accession_number: acc,\n                        account: sessionStorage.getItem(\"ACCOUNT\")\n                    } \n                })\n                .then(res => {\n                    alert(\"預約成功!\")\n                    location.reload()\n                })\n                .catch(e => { \n                    alert(\"預約失敗\")\n                    console.log(e) \n                })\n        }\n    },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n    .Hide {\n        display: none;\n    }\n</style>"],"sourceRoot":"src/views"}]}