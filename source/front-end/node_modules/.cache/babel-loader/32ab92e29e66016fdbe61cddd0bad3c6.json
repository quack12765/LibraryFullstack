{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\views\\AdminMain.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\views\\AdminMain.vue","mtime":1658395525902},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBCb3Jyb3dpbmc6IFtdLAogICAgICBTcGFuX2luOiBbXSwKICAgICAgU3Bhbl9vdXQ6IFtdLAogICAgICBzZWxfYnJhbmNoOiAnJywKICAgICAgYnJhbmNoOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdCcmFuY2gnKSB8fCAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2dldEJvcnJvd2luZ0J5QnJhbmNoJywgewogICAgICBkYXRhOiB7CiAgICAgICAgYnJhbmNoOiB0aGlzLmJyYW5jaAogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuQm9ycm93aW5nID0gcmVzLmRhdGE7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgIH0pOwogICAgdGhpcy4kaHR0cC5wb3N0KCcvYXBpL2xvY2F0aW9uL2dldEluVHJhbnNmZXJCeUJyYW5jaCcsIHsKICAgICAgZGF0YTogewogICAgICAgIGJyYW5jaDogdGhpcy5icmFuY2gKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzLlNwYW5faW4gPSByZXMuZGF0YTsKICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICB9KTsKICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9sb2NhdGlvbi9nZXRPdXRUcmFuc2ZlckJ5QnJhbmNoJywgewogICAgICBkYXRhOiB7CiAgICAgICAgYnJhbmNoOiB0aGlzLmJyYW5jaAogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuU3Bhbl9vdXQgPSByZXMuZGF0YTsKICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIFNldEJyYW5jaDogZnVuY3Rpb24gU2V0QnJhbmNoKGIpIHsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnQnJhbmNoJywgYik7CiAgICAgIHRoaXMuYnJhbmNoID0gYjsKICAgIH0sCiAgICBIYW5kbGVCYWNrQ29weTogZnVuY3Rpb24gSGFuZGxlQmFja0NvcHkoYWNjKSB7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9zZWFyY2hCb29rL2JhY2tDb3B5QnlBY2Nlc3Npb24nLCB7CiAgICAgICAgZGF0YTogewogICAgICAgICAgYWNjZXNzaW9uX251bWJlcjogYWNjLAogICAgICAgICAgbG9jYXRpb246IHRoaXMuYnJhbmNoCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhbGVydChyZXMuZGF0YS5hZmZlY3RlZFJvd3MgPT09IDAgPyAi5q246YKE5aSx5pWXISIgOiAi5q246YKE5oiQ5YqfISIpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBicmFuY2g6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["AdminMain.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,UAAA,EAAA,EAJA;AAKA,MAAA,MAAA,EAAA,cAAA,CAAA,OAAA,CAAA,QAAA,KAAA;AALA,KAAA;AAOA,GATA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AACA,SAAA,KAAA,CACA,IADA,CACA,sCADA,EACA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,MAAA,EAAA,KAAA;AADA;AADA,KADA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA;AACA,KARA,EASA,KATA,CASA,UAAA,CAAA,EAAA;AAAA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,KATA;AAWA,SAAA,KAAA,CACA,IADA,CACA,qCADA,EACA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,MAAA,EAAA,KAAA;AADA;AADA,KADA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA,KATA,EAUA,KAVA,CAUA,UAAA,CAAA,EAAA;AAAA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,KAVA;AAYA,SAAA,KAAA,CACA,IADA,CACA,sCADA,EACA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,MAAA,EAAA,KAAA;AADA;AADA,KADA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA,KATA,EAUA,KAVA,CAUA,UAAA,CAAA,EAAA;AAAA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,KAVA;AAYA,GA/CA;AAiDA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,CADA,EACA;AACA,MAAA,cAAA,CAAA,OAAA,CAAA,QAAA,EAAA,CAAA;AACA,WAAA,MAAA,GAAA,CAAA;AACA,KAJA;AAMA,IAAA,cANA,0BAMA,GANA,EAMA;AACA,WAAA,KAAA,CACA,IADA,CACA,qCADA,EACA;AACA,QAAA,IAAA,EAAA;AACA,UAAA,gBAAA,EAAA,GADA;AAEA,UAAA,QAAA,EAAA,KAAA;AAFA;AADA,OADA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,YAAA,KAAA,CAAA,GAAA,OAAA,GAAA,OAAA,CAAA;AACA,QAAA,QAAA,CAAA,MAAA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,CAAA,EAAA;AAAA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AAAA,OAXA;AAYA;AAnBA,GAjDA;AAuEA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,OADA,qBACA;AACA,QAAA,QAAA,CAAA,MAAA;AACA;AAHA;AADA;AAvEA,CAAA","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <h3 class=\"text-center\">{{ branch }}</h3>\r\n        <div class=\"card p-4 border mt-5\">\r\n            <h3>所有外借書詳情</h3>\r\n            <table class=\"table mt-3\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">書名</th>\r\n                        <th scope=\"col\">條碼號</th>\r\n                        <th scope=\"col\">借閱日期</th>\r\n                        <th scope=\"col\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(b, index) in Borrowing\" :key=\"b.accession_number\" class=\"h-100\">\r\n                        <td>{{ index + 1 }}</td>\r\n                        <td><router-link :to=\" '/book/' + b.ISBN \">{{ b.name }}</router-link></td>\r\n                        <td>{{ b.accession_number }}</td>\r\n                        <td>{{ ParseDate(b.borrow_date) }}</td>\r\n                        <td><button @click=\"HandleBackCopy(b.accession_number)\" class=\"btn btn-danger\">歸還</button></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class=\"card p-4 border mt-5\">\r\n            <h3>今日跨館 <mark>進</mark> 的館藏</h3>\r\n            <table class=\"table mt-3\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">書名</th>\r\n                        <th scope=\"col\">條碼號</th>\r\n                        <th scope=\"col\">借閱日期</th>\r\n                        <th scope=\"col\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(b, index) in Borrowing\" :key=\"b.accession_number\" class=\"h-100\">\r\n                        <td>{{ index + 1 }}</td>\r\n                        <td><router-link :to=\" '/book/' + b.ISBN \">{{ b.name }}</router-link></td>\r\n                        <td>{{ b.accession_number }}</td>\r\n                        <td>{{ ParseDate(b.borrow_date) }}</td>\r\n                        <td><button @click=\"HandleBackCopy(b.accession_number)\" class=\"btn btn-danger\">歸還</button></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n\r\n\r\n        <div class=\"jumpFrame row justify-content-center align-items-center\" v-if=\" branch === '' \">\r\n            <div class=\"card col-6 p-5\" @click.stop>\r\n                <h3>您所在的分館是？</h3>\r\n                <hr>\r\n                <form>\r\n                    <div class=\"form-group form-row\">\r\n                        <label for=\"address col\" class=\"col-sm-2 col-form-label\">分館</label>\r\n                        <select class=\"form-control col\" v-model=\"sel_branch\" id=\"address\">\r\n                            <option v-for=\"(b) in branchs\" :key=\"b.branch_name\">{{ b.branch_name }}</option>\r\n                        </select>\r\n                    </div>\r\n                </form>\r\n                <button class=\"btn btn-primary mt-5\" @click=\"SetBranch(sel_branch)\">確定</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            Borrowing: [],\r\n            Span_in: [],\r\n            Span_out: [],\r\n            sel_branch: '',\r\n            branch: sessionStorage.getItem('Branch') || \"\"\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.$http\r\n            .post('/api/searchBook/getBorrowingByBranch', {\r\n                data: {\r\n                    branch: this.branch\r\n                }\r\n            })\r\n            .then(res => {\r\n                this.Borrowing = res.data\r\n            })\r\n            .catch(e => { console.log(e) })\r\n\r\n        this.$http\r\n            .post('/api/location/getInTransferByBranch', {\r\n                data: {\r\n                    branch: this.branch\r\n                }\r\n            })\r\n            .then(res => {\r\n                this.Span_in = res.data\r\n                console.log(res.data)\r\n            })\r\n            .catch(e => { console.log(e) })\r\n\r\n        this.$http\r\n            .post('/api/location/getOutTransferByBranch', {\r\n                data: {\r\n                    branch: this.branch\r\n                }\r\n            })\r\n            .then(res => {\r\n                this.Span_out = res.data\r\n                console.log(res.data)\r\n            })\r\n            .catch(e => { console.log(e) })\r\n        \r\n    },\r\n\r\n    methods: {\r\n        SetBranch(b) {\r\n            sessionStorage.setItem('Branch', b)\r\n            this.branch = b\r\n        },\r\n\r\n        HandleBackCopy(acc) {\r\n            this.$http\r\n                .post('/api/searchBook/backCopyByAccession', { \r\n                    data: {\r\n                        accession_number: acc,\r\n                        location: this.branch\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    alert(res.data.affectedRows === 0 ? \"歸還失敗!\" : \"歸還成功!\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { console.log(e) })\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        branch: {\r\n            handler() {\r\n                location.reload()\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/views"}]}