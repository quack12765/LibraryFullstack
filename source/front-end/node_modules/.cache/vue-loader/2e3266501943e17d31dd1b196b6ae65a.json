{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\components\\commentBoard\\commentBoard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\components\\commentBoard\\commentBoard.vue","mtime":1658370447312},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJjb21tZW50LWJvYXJkICIsDQoNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbWF4U2NvcmU6IDUsDQogICAgICAgICAgICBvcmlfc2NvcmVNYXA6IFtdLA0KICAgICAgICAgICAgc2VsX3Njb3JlTWFwOiBbXSwNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBwcm9wczogWyJjb21tZW50aW5mbyJdLA0KDQogICAgbW91bnRlZCgpew0KICAgICAgICB0aGlzLm9yaV9zY29yZU1hcCA9IHRoaXMuTWFwU2NvcmVUb1RGQXJyYXkodGhpcy5tYXhTY29yZSwgdGhpcy5jb21tZW50aW5mby5zY29yZSkNCiAgICAgICAgdGhpcy5zZWxfc2NvcmVNYXAgPSB0aGlzLm9yaV9zY29yZU1hcA0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQogICAgICAgIEhhbmRsZVNlbmRDb21taXQ6IGZ1bmN0aW9uIChlKSB7DQoNCiAgICAgICAgICAgIGlmKHRoaXMuY29tbWVudGluZm8uc2NvcmUgPT09IDApIHJldHVybiA7DQoNCiAgICAgICAgICAgIC8vIHRoaXMgY29tcG9uZW50IGVuYWJsZSB0byBlZGl0LCBzbyB3ZSBzaG91bGQgZGVsZXRlIHRoZSBkYXRhIGJlZm9yZSBzZW5kaW5nIGl0Lg0KDQogICAgICAgICAgICAvLyBkZXRldGUNCiAgICAgICAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgICAgICAgICAucG9zdCgnL2FwaS9jb21tZW50L2RlbENvbW1lbnRCeUFjY291bnQnLCB7IA0KICAgICAgICAgICAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICAgICAgICAgICAgICBJU0JOOiB0aGlzLmNvbW1lbnRpbmZvLmNvbW1lbnRfSVNCTiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IHRoaXMuYWNjb3VudCwNCiAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gYWRkDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvYXBpL2NvbW1lbnQvYWRkQ29tbWVudEJ5QWNjb3VudCcsIHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJU0JOOiB0aGlzLmNvbW1lbnRpbmZvLmNvbW1lbnRfSVNCTiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogdGhpcy5hY2NvdW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZTogdGhpcy5jb21tZW50aW5mby5zY29yZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50aW5mby5jb21tZW50DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLpgIHlh7rmiJDlip8iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi6YCB5Ye65aSx5pWXIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKSANCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsgDQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLmm7/mj5vlpLHmlZciKQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKSANCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICANCg0KICAgICAgICAvLyBjYWxsIHdoaWxlIGhvdmVyDQogICAgICAgIEhhbmRsZVNlbGVjdFNjb3JlKGluZGV4KSB7DQogICAgICAgICAgICBpZiggIXRoaXMuY29tbWVudGluZm8uaXNNb2NrICkgcmV0dXJuIDsNCg0KICAgICAgICAgICAgdGhpcy5zZWxfc2NvcmVNYXAgPSB0aGlzLk1hcFNjb3JlVG9URkFycmF5KHRoaXMubWF4U2NvcmUsIGluZGV4ICsgMSkNCiAgICAgICAgfSwNCg0KICAgICAgICBNYXBTY29yZVRvVEZBcnJheShtYXgsIG4pIHsNCiAgICAgICAgICAgIHJldHVybiAobmV3IEFycmF5KG4pKS5maWxsKHRydWUpLmNvbmNhdCgobmV3IEFycmF5KG1heCAtIG4pKS5maWxsKGZhbHNlKSkNCiAgICAgICAgfSwNCg0KICAgICAgICBIYW5kbGVEZWxldGVDb21tZW50KCkgew0KICAgICAgICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAgICAgICAgIC5wb3N0KCcvYXBpL2NvbW1lbnQvZGVsQ29tbWVudEJ5QWNjb3VudCcsIHsgDQogICAgICAgICAgICAgICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIElTQk46IHRoaXMuY29tbWVudGluZm8uY29tbWVudF9JU0JOLA0KICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogdGhpcy5hY2NvdW50LA0KICAgICAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWIqumZpOaIkOWKnyIpDQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICBhbGVydCgi5Yiq6Zmk5aSx5pWXIikNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkgDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0sDQp9DQo="},{"version":3,"sources":["commentBoard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"commentBoard.vue","sourceRoot":"src/components/commentBoard","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"card  h-100 mt-3\">\r\n            <div class=\"card-body\">\r\n                <div class=\"row align-items-center\">\r\n                    <div class=\"vertical-center col pt-2\">\r\n                        <h2 class=\"card-title\">user: <mark>{{ commentinfo.comment_account }}</mark></h2>\r\n                    </div>\r\n                    <div class=\"col\" style=\"font-size:30px; cursor:pointer;\">\r\n                        <span \r\n                            v-for=\"(isFill, index) in sel_scoreMap\" :key=\"index\" \r\n                            @mouseover=\"HandleSelectScore(index)\"\r\n                            @mouseleave=\"sel_scoreMap = ori_scoreMap\" \r\n                            @click=\"ori_scoreMap = sel_scoreMap; commentinfo.score = index + 1; \"\r\n                        > \r\n                            {{ isFill ? '★' : '☆' }} \r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n                <div class=\"card-text\">\r\n                    <div v-if=\"commentinfo.isMock !== true\">\r\n                        {{ commentinfo.comment }} \r\n                    </div>\r\n                    <div v-else>\r\n                        <form>\r\n                            <textarea v-model=\"commentinfo.comment\" class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\" placeholder=\"輸入評論...\"></textarea>\r\n                            <button @click.prevent=\"HandleSendCommit\" class=\"btn btn-danger mt-3\">送出評論</button>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"mt-3\">\r\n                        <button v-if=\" commentinfo.isMock !== true && commentinfo.comment_account === account \" @click=\"$set(commentinfo, 'isMock', true)\" class=\"btn btn-primary mt-3\">修改評論</button>\r\n                        <button v-if=\" commentinfo.isMock !== true && commentinfo.comment_account === account \" @click=\"HandleDeleteComment\" class=\"btn btn-danger mt-3 ml-3\">刪除評論</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- text-center justify-content-around -->\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n    name: \"comment-board \",\r\n\r\n    data() {\r\n        return {\r\n            maxScore: 5,\r\n            ori_scoreMap: [],\r\n            sel_scoreMap: [],\r\n        }\r\n    },\r\n\r\n    props: [\"commentinfo\"],\r\n\r\n    mounted(){\r\n        this.ori_scoreMap = this.MapScoreToTFArray(this.maxScore, this.commentinfo.score)\r\n        this.sel_scoreMap = this.ori_scoreMap\r\n    },\r\n\r\n    methods: {\r\n        HandleSendCommit: function (e) {\r\n\r\n            if(this.commentinfo.score === 0) return ;\r\n\r\n            // this component enable to edit, so we should delete the data before sending it.\r\n\r\n            // detete\r\n            this.$http\r\n                .post('/api/comment/delCommentByAccount', { \r\n                    data: {\r\n                        ISBN: this.commentinfo.comment_ISBN,\r\n                        account: this.account,\r\n                    } \r\n                })\r\n                .then(res => {\r\n\r\n                    // add\r\n                    this.$http\r\n                        .post('/api/comment/addCommentByAccount', { \r\n                            data: {\r\n                                ISBN: this.commentinfo.comment_ISBN,\r\n                                account: this.account,\r\n                                score: this.commentinfo.score,\r\n                                comment: this.commentinfo.comment\r\n                            } \r\n                        })\r\n                        .then(res => {\r\n                            alert(\"送出成功\")\r\n                            location.reload()\r\n                        })\r\n                        .catch(e => { \r\n                            alert(\"送出失敗\")\r\n                            console.log(e) \r\n                        })\r\n                        \r\n                })\r\n                .catch(e => { \r\n                    alert(\"替換失敗\")\r\n                    console.log(e) \r\n                })\r\n        },\r\n        \r\n\r\n        // call while hover\r\n        HandleSelectScore(index) {\r\n            if( !this.commentinfo.isMock ) return ;\r\n\r\n            this.sel_scoreMap = this.MapScoreToTFArray(this.maxScore, index + 1)\r\n        },\r\n\r\n        MapScoreToTFArray(max, n) {\r\n            return (new Array(n)).fill(true).concat((new Array(max - n)).fill(false))\r\n        },\r\n\r\n        HandleDeleteComment() {\r\n            this.$http\r\n                .post('/api/comment/delCommentByAccount', { \r\n                    data: {\r\n                        ISBN: this.commentinfo.comment_ISBN,\r\n                        account: this.account,\r\n                    } \r\n                })\r\n                .then(res => {\r\n                    alert(\"刪除成功\")\r\n                    location.reload()\r\n                })\r\n                .catch(e => { \r\n                    alert(\"刪除失敗\")\r\n                    console.log(e) \r\n                })\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}