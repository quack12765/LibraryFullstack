{"remainingRequest":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\views\\pages\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\src\\views\\pages\\Login.vue","mtime":1658382318985},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\library_PROJ\\LibraryFullstack\\source\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpICB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBhY2NvdW50OiAnJywNCiAgICAgICAgICAgIHBhc3N3b3JkOiAnJywNCiAgICAgICAgICAgIHByb3RlY3Rpb246dHJ1ZQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCl7DQogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCAnJyk7DQogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ1JPTEUnLCAnJykNCiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnTkFNRScsICcnKQ0KDQogICAgICAgIHRoaXMuYWNjb3VudCAgICA9ICcnDQogICAgICAgIHRoaXMucGFzc3dvcmQgICA9ICcnDQogICAgICAgIHRoaXMucHJvdGVjdGlvbiAgICA9IHRydWUNCiAgICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICBsb2dpbigpew0KICAgICAgICAgICAgaWYgKHRoaXMucHJvdGVjdGlvbil7DQogICAgICAgICAgICAgICAgaWYoISh0aGlzLmFjY291bnQpIHx8ICEodGhpcy5wYXNzd29yZCkpIHJldHVybiBhbGVydCgn6KuL56K65a+m6Ly45YWl5biz6Jmf5a+G56K8ISEhJyk7DQoNCiAgICAgICAgICAgICAgICB0aGlzLnByb3RlY3Rpb24gPSBmYWxzZQ0KDQogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgICAgICAgICAgICAgIGFjY291bnQ6dGhpcy5hY2NvdW50LA0KICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDp0aGlzLnBhc3N3b3JkDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLiRodHRwDQogICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvYXBpL2FjY291bnRzL2xvZ2luJyx7ZGF0YTpkYXRhfSkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZGF0YVswXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdBQ0NPVU5UJywgdGhpcy5hY2NvdW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdST0xFJywgcmVzdWx0LnJvbGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ05BTUUnLCByZXN1bHQubmFtZSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm9sZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ1JPTEUnKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvbGUgPT09ICdhZG1pbicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbWFpbi9hZG1pbi1tYWluJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKHJvbGUgPT09ICd1c2VyJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9tYWluL21haW4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5biz6Jmf5qyK6ZmQ5pyJ5ZWP6aGM77yM6KuL6IGv57mr57O757Wx566h55CG5ZOhISEhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ0FDQ09VTlQnLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnUk9MRScsICcnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdOQU1FJywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5a+G56K85LiN5q2j56K6ISEhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfnmbznlJ/pnZ7poJDmnJ/ni4Dms4HvvIzoq4vnorroqo3lvozlho3pgLLooYzmk43kvZwhJykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvdGVjdGlvbiA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNob3dBbGVydCgpew0KICAgICAgICAgICAgYWxlcnQoJ+iri+iBr+e5q+ezu+e1seeuoeeQhuWToSEhIScpDQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\r\n    <CContainer class=\"d-flex align-items-center min-vh-100\">\r\n        <CRow class=\"justify-content-center\">\r\n            <CCol lg = '12'>\r\n                <CCardGroup>\r\n                    <CCard\r\n                        color=\"info\"\r\n                        text-color=\"white\"\r\n                        class=\"text-center py-2\"\r\n                        style=\"width:100%\"\r\n                    >\r\n                        <CCardBody>\r\n                            <h2 class=\"pt-4\">Library</h2>\r\n                            <CRow class=\"pt-4\">\r\n                                <CCol>\r\n                                    <CImg src=\"img/brand/library.jpg\" fluid class=\"mb-2\" />\r\n                                </CCol>\r\n                            </CRow>\r\n                        </CCardBody>\r\n                    </CCard>\r\n\r\n                    <CCard class=\"p-5\">\r\n                        <CCardBody>\r\n                            <CForm>\r\n                                <h1>登入</h1>\r\n                                <p class=\"text-muted\">請輸入帳號密碼</p>\r\n                                <CInput type=\"text\" placeholder=\"帳號\" v-model=\"account\" list=\"account_list\">\r\n                                    <template #prepend-content><CIcon name=\"cil-user\"/></template>\r\n                                </CInput>\r\n                                <CInput placeholder=\"密碼\" type=\"password\" v-model=\"password\" @keyup.enter.native=\"login\">\r\n                                    <template #prepend-content><CIcon name=\"cil-lock-locked\"/></template>\r\n                                </CInput>\r\n                                <CRow>\r\n                                    <CCol col=\"4\">\r\n                                        <CButton color=\"link\" class=\"px-0\" @click=\"showAlert\">忘記密碼?</CButton>\r\n                                    </CCol>\r\n                                    <CCol col=\"4\">\r\n                                        <router-link :to=\" { name: 'Register' } \">註冊</router-link>\r\n                                    </CCol>\r\n                                    <CCol col=\"4\" class=\"text-right\">\r\n                                        <CButton color=\"info\" class=\"px-4\" @click=\"login\">登入</CButton>\r\n                                    </CCol>\r\n                                </CRow>\r\n                            </CForm>\r\n                        </CCardBody>\r\n                    </CCard>\r\n                </CCardGroup>\r\n            </CCol>\r\n        </CRow>\r\n    </CContainer>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data()  {\r\n        return {\r\n            account: '',\r\n            password: '',\r\n            protection:true\r\n        }\r\n    },\r\n    created(){\r\n        sessionStorage.setItem('ACCOUNT', '');\r\n        sessionStorage.setItem('ROLE', '')\r\n        sessionStorage.setItem('NAME', '')\r\n\r\n        this.account    = ''\r\n        this.password   = ''\r\n        this.protection    = true\r\n    },\r\n    methods:{\r\n        login(){\r\n            if (this.protection){\r\n                if(!(this.account) || !(this.password)) return alert('請確實輸入帳號密碼!!!');\r\n\r\n                this.protection = false\r\n\r\n                let data = {\r\n                    account:this.account,\r\n                    password:this.password\r\n                }\r\n              \r\n                this.$http\r\n                    .post('/api/accounts/login',{data:data})\r\n                    .then(res => {\r\n                        if (res.status === 200){\r\n                            var result = res.data[0]\r\n                            if (result){\r\n                                sessionStorage.setItem('ACCOUNT', this.account)\r\n                                sessionStorage.setItem('ROLE', result.role)\r\n                                sessionStorage.setItem('NAME', result.name)\r\n\r\n                                let role = sessionStorage.getItem('ROLE')\r\n\r\n                                if(role === 'admin') {\r\n                                    this.$router.push('/main/admin-main')\r\n                                }else if (role === 'user') {\r\n                                    this.$router.push('/main/main')\r\n                                }else {\r\n                                    alert('帳號權限有問題，請聯繫系統管理員!!!')\r\n                                }\r\n                            } else {\r\n                                sessionStorage.setItem('ACCOUNT', '')\r\n                                sessionStorage.setItem('ROLE', '')\r\n                                sessionStorage.setItem('NAME', '')\r\n                                this.password = ''\r\n                                alert('密碼不正確!!!')\r\n                            }\r\n                        } else {\r\n                            alert('發生非預期狀況，請確認後再進行操作!')\r\n                        }\r\n                        this.protection = true\r\n                    })\r\n                    .catch(err => { console.log(err.response.data.message) })\r\n            }\r\n        },\r\n        showAlert(){\r\n            alert('請聯繫系統管理員!!!')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}